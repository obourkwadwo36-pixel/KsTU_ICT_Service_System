{% extends "base.html" %}
{% block title %}ICT Officer Job History{% endblock %}

{% block content %}
<section class="card">
  <h2>All Technicians' Job History</h2>
  <table class="table">
    <thead>
      <tr>
        <th>ID</th>
        <th>Technician</th>
        <th>Service Request</th>
        <th>Update Text</th>
        <th>Status</th>
        <th>Date</th>
      </tr>
    </thead>
    <tbody>
      {% for update in history %}
      <tr>
        <td>{{ update.id }}</td>
        <td>{{ update.technician.user.get_full_name|default:update.technician.user.username }}</td>
        <td>{{ update.request.category }}</td>
        <td>{{ update.update_text }}</td>
        <td><span class="status {{ update.request.status|slugify|lower }}">{{ update.request.status }}</span></td>
        <td>{{ update.date_updated|date:"Y-m-d H:i" }}</td>

      </tr>
      {% empty %}
      <tr><td colspan="6">No job history records found.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</section>
{% endblock %}
